
// Módulo de Validação de Senha
module senha_validator (
    input [3:0] SENHA,
    input B, clk, reset,
    input [1:0] error_count,
    output reg senha_ok
);
    reg [3:0] senha_armazenada;

    // Armazenar senha
    always @(posedge clk or posedge reset) begin
        if (reset)
            senha_armazenada <= 4'b0000; // Zera senha
        else if (B == 0 && error_count != 2'b11)
            senha_armazenada <= SENHA; // Armazena nova senha
    end

    // Comparar senha
    always @(*) begin
        if (error_count == 2'b11)
            senha_ok = 0; // Bloqueado
        else
            senha_ok = (SENHA == senha_armazenada && B == 0) ? 1 : 0;
    end
endmodule
